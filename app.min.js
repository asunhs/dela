/*! Grunt Uglify 2016-12-22 */ require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({DelaApp:[function(a,b,c){b.exports=angular.module("DelaApp",["templates-html","yahoo-weather","firebaseApp","ngTouch"]).config(["$compileProvider","$httpProvider",function(a,b){a.debugInfoEnabled(!1),b.useApplyAsync(!0)}])},{}],1:[function(a,b,c){angular.module("templates-html",["dela/delaCard.tpl.html","dela/loading.tpl.html"]),angular.module("dela/delaCard.tpl.html",[]).run(["$templateCache",function(a){a.put("dela/delaCard.tpl.html",'<div class="dela-card" ng-class="{fold:!unfold}">\n    <div class="dela-card-header">\n        <span class="cal-level {{::calLevel}}">{{::calLabel}}</span>\n        <span class="zone {{::menu.zoneId}}">{{::menu.zoneId}}</span>\n    </div>\n    <div class="dela-card-content">\n        <img ng-src="{{::menu.imgSrc}}" alt="{{::menu.en}}" ng-click="toggle()" />\n        <div class="dela-card-section {{::menu.sectionId}}">\n            {{::menu.sectionName}}\n        </div>\n        <div class="dela-card-menu" ng-click="toggle()">\n            <p><span class="title-ko">{{::menu.ko}}</span></p>\n            <p><span class="title-en">{{::menu.en}}</span></p>\n            <p>{{::calories | number}} kcal</p>\n            <p ng-if="!menu.soldout"><span class="price">{{::price | number}} 원</span> <span class="discounted">({{::discounted | number}} 원)</span></p>\n            <p ng-if="menu.soldout"><span class="soldout">SOLD OUT</span></p>\n        </div>\n\n        <!-- <div class="dela-card-footer">\n            <div class="vote">\n                <div class="gauge-box">\n                    <span class="gauge gauge-good" ng-style="{width:likes + \'%\'}"><b>{{likes}}%</b></span>\n                    <span class="gauge gauge-bad" ng-style="{width:dislikes + \'%\'}"><b>{{dislikes}}%</b></span>\n                </div>\n                <div class="btn btn-good" ng-click="good()">\n                    <span class="badge">{{like | badge}}</span>\n                </div>\n                <div class="btn btn-bad" ng-click="bad()">\n                    <span class="badge">{{dislike | badge}}</span>\n                </div>\n            </div>\n        </div> -->\n        <!-- <div class="dela-card-emblem">\n            <span ng-if="ratingOrder" class="rating rating_{{ratingOrder}}"></span>\n        </div> -->\n    </div>\n</div>\n')}]),angular.module("dela/loading.tpl.html",[]).run(["$templateCache",function(a){a.put("dela/loading.tpl.html",'<div class="loading-wrap">\n    <img src="images/loading_apple.gif" alt="loading" />\n</div>')}])},{}],2:[function(a,b,c){function d(a){this.keyCode=a.keyCode,this.like=parseInt(a.likeCount),this.dislike=parseInt(a.dislikeCount)}function e(a,b,c){function e(e,h){return b.request(f+"counts&keyCodes="+_.map(e,function(a){return encodeURIComponent(a)}).join(","),h).then(function(b){var e=g(_.map(b,function(a){return new d(a)}));return a.$broadcast("updateCounts",c.list=e),c.list})}function g(a){var b=_.filter(a,function(a){return a.like>=5});return b.sort(function(a,b){return a.getLikeRatio()===b.getLikeRatio()?b.like-a.like:b.getLikeRatio()-a.getLikeRatio()}),b[0]&&(b[0].order=1),b[1]&&(b[1].order=2),b[2]&&(b[2].order=3),a}function h(a){return b.request(f+"good&keyCode="+encodeURIComponent(a.keyCode))}function i(a){return b.request(f+"bad&keyCode="+encodeURIComponent(a.keyCode))}function j(a){return _.findWhere(c.list,{keyCode:a})||new d({keyCode:a,likeCount:0,dislikeCount:0})}this.counts=e,this.like=h,this.dislike=i,this.getCountByKeyCode=j}d.prototype={getLikeRatio:function(){return this.getTotal()?parseInt(1e4*this.like/this.getTotal())/100:0},getDislikeRatio:function(){return this.getTotal()?parseInt(1e4*this.dislike/this.getTotal())/100:0},getTotal:function(){return this.like+this.dislike}};var f="https://script.google.com/macros/s/AKfycbx-WG_T_qYlQIeSH2xbeyz1Ejw8HVqNtS7BFILZFVxXYzk1Idk/exec?callback=JSON_CALLBACK&action=";e.$inject=["$rootScope","JSONPSvc","Counts"],a("DelaApp").service("CountSvc",e).value("Counts",{})},{DelaApp:"DelaApp"}],3:[function(a,b,c){function d(a){this.zoneId=a.zoneId,this.sectionId=a.sectionId,this.sectionName=_.unescape(a.sectionName),this.keyCode=a.keyCode,this.cal=a.cal,this.en=_.unescape(a.en),this.ko=_.unescape(a.ko),this.price=a.price,this.soldout=a.soldout,this.imgSrc=a.product?"http://sdsfoodmenu.co.kr:9106/foodcourt/menu?menuId="+a.product:"images/no-image.png"}function e(a,b,c,e,f){function g(){return f.getJamsilMenu().then(function(a){return c.list=a.menus||[],c.time=a.time,c.opened=a.opened,c})}function h(a){return _.map(a,function(a){return new d(a)})}function i(){b.counts(c.list.map(function(a){return a.keyCode}),!0)}this.getMenus=g,this.getCards=h,this.getCounts=i}function f(a,b,c,d,e,f){function h(){b.orderIndex=(b.orderIndex+1)%3}c.getMenus().then(function(a){b.menus=a.list,b.time=a.time,b.opened=a.opened}),b.orderFactor=["","cal","price"],b.orderName=["Place","Calories","Price"],b.orderIndex=0,d.getWeather().then(function(c){try{b.weatherImg="http://l.yimg.com/a/i/us/we/52/"+c.code+".gif",b.weatherText=c.text,b.weatherTemperature=parseInt(c.temp),b.weatherPosition="서울특별시 송파구 잠실동",b.weatherRcode=c.woeid,_.find(g,c.code)&&a.find("body").letItSnow()}catch(d){}}),e.getSDS().then(function(a){b.sdsStockSymbol=a.symbol,b.sdsStockName=a.Name,b.sdsStockPrice=a.Bid||a.LastTradePriceOnly,b.sdsStockChange=a.Change,b.sdsStockChangeinPercent=a.ChangeinPercent,b.sdsStockState="+"==a.Change[0]?"red":"-"==a.Change[0]?"blue":""}),b.toggleOrder=h}var g=[13,14,15,16,41,42,43,46];e.$inject=["JSONPSvc","CountSvc","Cards","StoreSvc","FirebaseSvc"],f.$inject=["$document","$scope","DelaSvc","YahooWeatherAPI","StockSvc","FirebaseSvc"],a("DelaApp").service("DelaSvc",e).controller("DelaCtrl",f).value("Cards",{}).run(["$document","$interval",function(a,b){b(function(){var b=a.find(".footer a.slide");b.hasClass("out")?b.removeClass("out"):b.addClass("out")},5e3)}])},{DelaApp:"DelaApp"}],4:[function(a,b,c){function d(a){switch(a){case"ZONE01":return"B1F";case"ZONE02":return"B2F";default:return""}}function e(a){return a.replace(/\D/g,"")}function f(a){return a>900?i.SUPER_HIGH:a>850?i.HIGH:600>a?i.SUPER_LOW:650>a?i.LOW:i.NORMAL}function g(a){return 5500==a?2500:a-2500}function h(a,b,c){return{restrict:"E",templateUrl:"dela/delaCard.tpl.html",scope:!0,replace:!0,link:function(h){function i(a){h.like=a.like,h.dislike=a.dislike,h.likes=a.getLikeRatio(),h.dislikes=a.getDislikeRatio(),h.ratingOrder=a.order}var k=h.menu,l=e(k.cal),m=e(k.price);h.zoneName=d(k.zoneId),h.calories=l,h.calLevel=f(l),h.calLabel=j[h.calLevel],h.price=m,h.discounted=g(m),h.$on("updateCounts",function(){i(a.getCountByKeyCode(k.keyCode))}),h.toggle=function(){h.unfold=!h.unfold},h.good=function(){return c.getSupportLocalStorage()?c.isVotedHash(k.keyCode)?alert("You already voted"):void a.like(k).then(function(){var b=a.getCountByKeyCode(k.keyCode);b.like++,i(b),c.storeVoteHash(k.keyCode)}).then(b.getCounts):alert("Currently browser can not use some features.\n- Vote")},h.bad=function(){return c.getSupportLocalStorage()?c.isVotedHash(k.keyCode)?alert("You already voted"):void a.dislike(k).then(function(){var b=a.getCountByKeyCode(k.keyCode);b.dislike++,i(b),c.storeVoteHash(k.keyCode)}).then(b.getCounts):alert("Currently browser can not use some features.\n- Vote")}}}}var i={SUPER_HIGH:"super-high",HIGH:"high",NORMAL:"normal",LOW:"low",SUPER_LOW:"super-low"},j={"super-high":"초고칼로리",high:"고칼로리",normal:"표준칼로리",low:"저칼로리","super-low":"초저칼로리"};h.$inject=["CountSvc","DelaSvc","StoreSvc"],a("DelaApp").directive("delaCard",h)},{DelaApp:"DelaApp"}],5:[function(a,b,c){function d(a){function b(){return a(function(a,b){return firebase.database().ref("delacourt/jamsil").on("value",function(b){a(b.val())},b)})}this.getJamsilMenu=b}d.$inject=["$q"],angular.module("firebaseApp",[]).service("FirebaseSvc",d)},{}],6:[function(a,b,c){function d(a,b){function c(c,d){if(d)return a.jsonp(c).then(function(a){return a.data});var e=b.loading();return a.jsonp(c).then(function(a){return e(),a.data},e)}this.request=c}d.$inject=["$http","LoadingSvc"],a("DelaApp").service("JSONPSvc",d)},{DelaApp:"DelaApp"}],7:[function(a,b,c){function d(a,b){function c(){var a=b.defer();return e.appendTo("body"),a.promise.then(function(){e.remove()}),function(){a.resolve()}}var d=a.get("dela/loading.tpl.html"),e=angular.element(d);this.loading=c}d.$inject=["$templateCache","$q"],a("DelaApp").service("LoadingSvc",d)},{DelaApp:"DelaApp"}],8:[function(a,b,c){function d(a){function b(){return a.reject()}this.getWeather=b}d.$inject=["$q"],angular.module("naver-weather",[]).service("NaverWeatherAPI",d)},{}],9:[function(a,b,c){function d(a){function b(){return a.jsonp(e).then(function(a){return a.data.query&&a.data.query.results&&a.data.query.results.quote})}this.getSDS=b}var e="https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20(%22018260.ks%22)%0A%09%09&format=json&diagnostics=true&env=http%3A%2F%2Fdatatables.org%2Falltables.env&callback=JSON_CALLBACK";d.$inject=["$http"],a("DelaApp").service("StockSvc",d)},{DelaApp:"DelaApp"}],10:[function(a,b,c){function d(a){function b(){return e.getItem("dela-mini-recent-menu-hash")}function c(a){var c=b();if(a!==c)try{e.setItem("dela-mini-vote-hash",JSON.stringify([])),e.setItem("dela-mini-recent-menu-hash",a)}catch(d){i=!1,alert("Currently browser can not use some features.\n- Vote")}}function d(){return JSON.parse(e.getItem("dela-mini-vote-hash"))}function f(b){var c=d(),e=a.hash+b;return _.contains(c,e)}function g(b){var c=d(),f=a.hash+b;c.push(f),e.setItem("dela-mini-vote-hash",JSON.stringify(c))}function h(){return i}var i=!0;this.loadMenuHash=b,this.storeMenuHash=c,this.loadVoteHashs=d,this.isVotedHash=f,this.storeVoteHash=g,this.getSupportLocalStorage=h}var e=window.localStorage;d.$inject=["Cards"],a("DelaApp").service("StoreSvc",d)},{DelaApp:"DelaApp"}],11:[function(a,b,c){function d(a){function b(){return a.jsonp(f+"&callback=JSON_CALLBACK").then(function(a){try{return _.extend({woeid:e},a.data.query.results.channel.item.condition)}catch(b){return null}})}this.getWeather=b}var e="22336060",f="https://query.yahooapis.com/v1/public/yql?q=select%20item.condition%20from%20weather.forecast%20where%20woeid%20%3D%20"+e+"%20and%20u%20%3D%27c%27&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys";d.$inject=["$http"],angular.module("yahoo-weather",[]).service("YahooWeatherAPI",d)},{}],12:[function(a,b,c){function d(){return function(a){return 1e3>a?""+a:"999+"}}a("DelaApp").filter("badge",d)},{DelaApp:"DelaApp"}],13:[function(a,b,c){function d(a){var b=a("number");return function(a){var c=a.match(e);return c[1]+b(c[2])}}var e=/([+-]?)([0-9]+)(\.[0-9]*)/;d.$inject=["$filter"],a("DelaApp").filter("kstock",d)},{DelaApp:"DelaApp"}],14:[function(a,b,c){!function(a,b,c){"use strict";var d=function(){return b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||b.oRequestAnimationFrame||b.msRequestAnimationFrame||function(a){b.setTimeout(a,1e3/60)}}();a.fn.letItSnow=function(){return this.each(function(){for(var b=a(this),c=function(){var e=a('<div class="let_it_snow"></div>'),f="-50px",g=Math.floor(Math.random()*b.width());e.addClass("snow_type_"+Math.ceil(2*Math.random())),e.css({top:f,left:g+"px",opacity:1}),b.append(e),e.addClass("snow_duration_"+Math.ceil(5*Math.random())),e.addClass("snow_delay_"+Math.ceil(5*Math.random())),e.addClass("snow_anim_"+Math.ceil(5*Math.random())),setTimeout(function(){setTimeout(function(){e.remove()},3e3),d(c)},6e3+Math.floor(1e3*Math.random()))},e=0;25>e;e++)setTimeout(c,200*e*Math.random())})}}(jQuery,window)},{}]},{},["DelaApp",2,3,4,5,6,7,8,9,10,11,12,13,14,1]);